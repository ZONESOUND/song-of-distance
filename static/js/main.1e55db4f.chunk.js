(this["webpackJsonpgps-react"]=this["webpackJsonpgps-react"]||[]).push([[0],{43:function(t,e,a){t.exports=a(92)},48:function(t,e,a){},78:function(t,e){},91:function(t,e,a){},92:function(t,e,a){"use strict";a.r(e);var n=a(3),o=a.n(n),r=a(38),i=a.n(r),c=(a(48),a(8)),s=a(9),l=a(11),h=a(10),p=a(12),d=a(16),u=a(39),f=a.n(u),g=a(40),v=a.n(g)()("https://gps-250305.appspot.com/"),m=!1;v.on("connect",(function(){m=!0,console.log("socket connect to server")}));var b=function(t,e){v.emit("osc",{address:t,args:[{value:e}]})};function w(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function O(t){var e=0,a=0,n=[],o=[],r={},i=!0;t.setup=function(){t.createCanvas(t.windowWidth,t.windowHeight),t.frameRate(30),console.log("issocketConnect:"+m)},t.windowResized=function(){t.resizeCanvas(t.windowWidth,t.windowHeight)},t.myCustomRedrawAccordingToNewPropsHandler=function(t){t.configData&&(r=t.configData),t.dataPoint&&0!==Object.keys(r).length&&(n=t.dataPoint,s())};var c=function(e){var a=function(t,e,a){if(a.lon&&a.lat){var n=(a.lon-e.lon)*e.globalScale,o=(a.lat-e.lat)*e.globalScale,r=t.createVector(n,o);return r.x=(r.x>0?1:-1)*Math.pow(Math.abs(r.x),e.globalPow),r.y=(r.y>0?1:-1)*Math.pow(Math.abs(r.y),e.globalPow),r.y*=-1,r}return null}(t,r,e),n=1*a.mag().toFixed(5),o=1*(a.heading()/Math.PI*180).toFixed(5);return function(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?w(a,!0).forEach((function(e){Object(d.a)(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):w(a).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}({},e,{pos:a,dist:n,degree:o})},s=function(){console.log("updateDataPoint");var e=t.int(t.frameCount/4);o=n.map(c).slice(-e),i=!(e>n.length)};t.draw=function(){var n,c;t.frameCount%25===0&&i&&s(),a=e,n=r.radioSpeed,c=t.frameCount,e=n*c/60%(2*Math.PI)-Math.PI,t.frameCount%30===0&&b("/gps/radio",1*(e/Math.PI*180).toFixed(5)),t.background(0,100),t.textSize(12),t.fill(255),t.stroke(255,10),t.strokeWeight(1);var l="Total Nodes: ".concat(function(t){return t.length}(o),"\nActive: ").concat(function(t){return t.filter((function(t){return!t.leave})).length}(o),"\nExecute Time: ").concat(t.frameCount,"\nScanning: ").concat((e/Math.PI*180).toFixed(2),"\xb0");!function(t,e){t.push(),t.fill(255),t.textSize(14),t.textLeading(24),t.text(new Date,20,t.height-35),t.pop(),t.push(),t.fill(255,130),t.text(e,20,35),t.pop()}(t,l),t.translate(t.width/2,t.height/2),function(t,e,a){var n=t.frameCount;t.noFill();for(var o=0;o<50;o++){var r=.5*Math.pow(Math.abs(o*e/10),a);if(t.stroke(255,Math.max(60-o/10*60,4)+4*Math.sin(-n/10+o)),o<9){t.fill(255,255,255,1+1*t.noise(n/10,o)),t.stroke(255,20),t.beginShape(t.LINES);for(var i=0;i<360;i++){var c=y(r,n,o,i,50/(10-o));t.vertex(c*Math.cos(t.radians(i+n/40)),c*Math.sin(t.radians(i+n/40)))}t.endShape(),t.noStroke(),t.beginShape();for(var s=0;s<360;s++){var l=y(r,n,o,s,30/(8-o));t.vertex(l*Math.cos(t.radians(s+n/40)),l*Math.sin(t.radians(s+n/40)))}t.endShape(t.CLOSE)}else t.noFill(),t.ellipse(0,0,r,r)}}(t,25e4,.58),function(t,e,a,n){var o,r=this;t.textSize(12),t.fill(255),t.stroke(255,10),t.strokeWeight(1),e.forEach((function(e,i){var c,s=Date.now()-e.timeStamp,l=e.pos.heading(),h=e.showId;if(e.pos){c=l-a;var p=(n-l)*(a-l)<=0&&Math.abs(n-a)<1;if(p){if(o!==e){var d=JSON.stringify({degree:e.degree,dist:e.dist,id:e.key,data:e.data,leave:e.leave,timeStamp:e.timeStamp,time_to_now_second:s});b("/gps/trigger",d)}o=e}t.push();var u=e.pos.mag();if(u<2*t.width){t.noFill(),t.beginShape();for(var f=0;f<u-10;f+=2){var g=l+t.noise(t.frameCount/10+f/10)/60;t.vertex(Math.cos(g)*f,Math.sin(g)*f)}t.endShape()}t.pop();var v=Math.abs(c%(2*Math.PI))<.08&&c<0;v&&(t.push(),t.fill(0,0,0,70),t.noStroke(),t.rect(e.pos.x+6,e.pos.y-5,t.textWidth(h)+8,12),t.fill(255),t.text(h,e.pos.x+10,e.pos.y+5),t.pop()),p?t.fill(255):t.fill(255,5+150/Math.log(s)+(v?50:0));var m=5+(c<0?Math.max(Math.min(-1/c,6),0):0)+2*t.noise(i,t.frameCount,e.lon);e.leave||(t.fill(255,0,0),t.text(r.uid,0,30),m=5+2*Math.sin(t.frameCount/10),t.push(),t.stroke(255,200),t.rectMode(t.CENTER),t.translate(e.pos.x,e.pos.y),t.rotate(t.frameCount/(10+e.lon/100)),t.noFill(),t.rect(0,0,12,12),t.pop(),t.text("//ACTIVE ".concat(t.frameCount%10<5?".":"","\nID: ").concat(h),e.pos.x+10,e.pos.y+20)),t.ellipse(e.pos.x,e.pos.y,m,m)}else console.log("no position?")}))}(t,o,e,a),t.noFill(),function(t,e){t.push(),t.stroke(255,200),t.strokeWeight(2),t.line(0,0,1e3*Math.cos(e),1e3*Math.sin(e)),t.noStroke();for(var a=0;a<20;a++)t.fill(255,2.5*(20-a)),t.beginShape(),t.vertex(0,0),t.vertex(1e3*Math.cos(e-.02*(a-1)),1e3*Math.sin(e-.02*(a-1))),t.vertex(1e3*Math.cos(e-.02*a),1e3*Math.sin(e-.02*a)),t.endShape(t.CLOSE);t.pop()}(t,e),function(t,e){t.push(),t.fill("#f24"),t.noStroke(),t.ellipse(0,0,8,8),t.rectMode(t.CENTER),t.stroke(255),t.noFill(),t.strokeWeight(2),t.rect(0,0,20,20),t.rotate(t.frameCount/100),t.stroke(255,20),t.rect(0,0,20,20),t.pop(),t.push(),t.fill(255,200),t.text(e,20,12),t.pop()}(t,r.centerName),function(t){t.push(),t.stroke(255,255),t.strokeWeight(10),t.rect(-t.width/2,-t.height/2,t.width,t.height),t.strokeWeight(1),t.stroke(255,30),t.rect(-t.width/2+10,-t.height/2+10,t.width-20,t.height-20),t.stroke(255,255),t.strokeWeight(2),t.line(-t.width/2,0,-t.width/2+20,0),t.line(t.width/2,0,t.width/2-20,0),t.line(0,-t.height/2,0,-t.height/2+20),t.line(0,t.height/2,0,t.height/2-20),t.noStroke(),t.fill(255,200),t.textAlign(t.CENTER),t.text("W",-t.width/2+20+15,5),t.text("E",t.width/2-20-15,5),t.text("N",0,-t.height/2+20+20),t.text("S",0,t.height/2-20-10),t.pop()}(t),function(t){var e=(new Date).getSeconds();t.fill(255),t.rect(-t.width/2+e%5*30+20,t.height/2-75,25,6),t.stroke(255),t.noFill(),t.rect(-t.width/2+(e+1)%5*30+20,t.height/2-75,25,6)}(t)}}function y(t,e,a,n,o){return t/2+Math.sin(e/(10+10*a)+n/360*2*Math.PI*10)*o}var S=a(23);S.initializeApp({apiKey:"AIzaSyBlfFaGBx7B_nBnlR29yhJAr6kPjqAdLfo",authDomain:"test-84ae7.firebaseapp.com",databaseURL:"https://test-84ae7.firebaseio.com",projectId:"test-84ae7",storageBucket:"test-84ae7.appspot.com",messagingSenderId:"762464277938"});var k=S.database().ref().child("earthlocations"),x=a(42);function j(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function M(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?j(a,!0).forEach((function(e){Object(d.a)(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):j(a).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var P=function(t){function e(){var t,a;Object(c.a)(this,e);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(l.a)(this,(t=Object(h.a)(e)).call.apply(t,[this].concat(o)))).state={allLocations:[],dataPoint:[]},a.updateDataSet=function(){console.log("updateDataset"),a.checkData(),a.setState({dataPoint:Object.entries(a.state.allLocations).map((function(t){return M({},t[1],{key:t[0]})}))})},a.checkData=function(){Object.entries(a.state.allLocations).forEach((function(t){("key"in t[1]||k.child(t[0]).child("key").set(t[0]),"showId"in t[1]||!t[0]||k.child(t[0]).child("showId").set(C(t[0])),t[1].timeStamp&&t[1].lat&&t[1].lon)?Date.now()-t[1].timeStamp>6e3?t[1].leave||k.child(t[0]).child("leave").set(!0):t[1].leave&&k.child(t[0]).child("leave").set(!1):k.child(t[0]).remove()}))},a}return Object(p.a)(e,t),Object(s.a)(e,[{key:"componentDidMount",value:function(){var t=this;k.on("value",(function(e){t.setState({allLocations:e.val()}),t.updateDataSet()}))}},{key:"render",value:function(){return o.a.createElement(D,{dataPoint:this.state.dataPoint})}}]),e}(n.Component),D=function(t){function e(){var t,a;Object(c.a)(this,e);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(l.a)(this,(t=Object(h.a)(e)).call.apply(t,[this].concat(o)))).state={data:{globalScale:25e4,globalPow:.58,maxLineLength:100,radioSpeed:.8,lat:42.35,lon:-71.05,centerName:"center"},GUI:new x.a},a.saveControlData=function(){var t=a.state.data;sessionStorage.setItem("controlData",JSON.stringify(M({},t)))},a}return Object(p.a)(e,t),Object(s.a)(e,[{key:"componentDidMount",value:function(){var t=sessionStorage.getItem("controlData");console.log(t);var e=this.state,a=e.data,n=e.GUI;t&&(a=JSON.parse(t),this.setState({data:a}));var o={"add config":this.saveControlData};n.add(a,"globalScale",1e3,8e5),n.add(a,"globalPow",0,.99),n.add(a,"maxLineLength"),n.add(a,"radioSpeed",0,3,.01),n.add(a,"centerName"),n.add(a,"lat",-90,90,.01),n.add(a,"lon",-180,180,.01),n.add(o,"add config"),n.close()}},{key:"render",value:function(){var t=this.state.data,e=this.props.dataPoint;return o.a.createElement(f.a,{sketch:O,dataPoint:e,configData:t})}}]),e}(n.Component),C=function(t){return"A"+t.split("").map((function(t){return t.charCodeAt(0)})).reduce((function(t,e){return t*e}),1)%1e3},E=P,I=(a(91),function(t){function e(){return Object(c.a)(this,e),Object(l.a)(this,Object(h.a)(e).apply(this,arguments))}return Object(p.a)(e,t),Object(s.a)(e,[{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement(E,null))}}]),e}(o.a.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(o.a.createElement(I,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()}))}},[[43,1,2]]]);
//# sourceMappingURL=main.1e55db4f.chunk.js.map