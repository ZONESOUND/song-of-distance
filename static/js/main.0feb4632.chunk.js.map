{"version":3,"sources":["socketUsage.js","sketch.js","firebase.js","firebaseConfig.js","ControlPanel.js","App.js","index.js"],"names":["socket","io","isSocketConnect","on","console","log","emitOSC","address","value","emit","args","sketch","p","radioDeg","lastRadioDeg","allDataPoint","dataPoint","configData","enableUpdate","setup","createCanvas","windowWidth","windowHeight","frameRate","windowResized","resizeCanvas","myCustomRedrawAccordingToNewPropsHandler","props","Object","keys","length","updateDataPoint","dataPointMap","e","pos","obj","lon","lat","globalScale","result","createVector","x","Math","pow","abs","globalPow","y","getPos","dist","mag","toFixed","deg","heading","PI","degree","num","int","frameCount","map","slice","draw","radioSpeed","background","textSize","fill","stroke","strokeWeight","text","calcPerson","filter","leave","calcActive","push","textLeading","Date","height","pop","drawText","translate","width","noFill","i","r","max","sin","noise","beginShape","LINES","o","useR","calcWaveR","vertex","cos","radians","endShape","noStroke","CLOSE","ellipse","drawCircle","lastTrigger","forEach","eid","angleDelta","timeDelta","now","timeStamp","dataDegree","nowId","showId","scanned","d","JSON","stringify","id","key","data","time_to_now_second","useAngle","scanAfter","rect","textWidth","min","uid","rectMode","CENTER","rotate","drawDataPoint","line","drawSwipeLine","centerName","drawCenter","textAlign","drawMapFrame","sec","getSeconds","drawSecRect","mult","firebase","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","earthLocRef","ref","child","LocData","state","allLocations","updateDataSet","checkData","setState","entries","set","getShowId","remove","snapshot","val","this","Component","ControlPanel","maxLineLength","GUI","dat","saveControlData","sessionStorage","setItem","dataStore","getItem","parse","btn","add","close","split","ch","charCodeAt","reduce","a","b","App","React","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.0feb4632.chunk.js","sourcesContent":["import io from 'socket.io-client';\n\nconst socket = io(\"https://gps-250305.appspot.com/\");\nlet isSocketConnect = false;\nsocket.on('connect', () => {\n    isSocketConnect = true;\n    console.log('socket connect to server');\n})\n\nexport let emitOSC = (address, value)=> {\n    socket.emit('osc', {\n        address: address,\n        args: [{\n            value: value\n        }]\n    });\n}\n\nexport {isSocketConnect};","import {emitOSC, isSocketConnect} from './socketUsage';\n//import {earthLocRef} from './firebase';\n\nexport default function sketch (p) {\n    let radioDeg = 0;\n    let lastRadioDeg = 0;\n    let allDataPoint = [];\n    let dataPoint = [];\n    let configData = {};\n    let enableUpdate = true;\n\n    p.setup = () => {\n        p.createCanvas(p.windowWidth, p.windowHeight);\n        p.frameRate(30);\n        console.log('issocketConnect:' + isSocketConnect);\n        \n    };\n\n    p.windowResized = () =>  {\n        p.resizeCanvas(p.windowWidth, p.windowHeight);\n    }\n\n    p.myCustomRedrawAccordingToNewPropsHandler = (props) => {\n        if (props.configData) {\n            configData = props.configData;\n        }\n        if (props.dataPoint && Object.keys(configData).length !== 0){\n            allDataPoint = props.dataPoint;\n            updateDataPoint();\n        }\n    };\n\n    let dataPointMap = (e) => {\n        let pos = getPos(p, configData, e);\n        let dist = pos.mag().toFixed(5)*1.0;\n        let deg = (pos.heading()/Math.PI*180).toFixed(5)*1.0;\n        return {...e, pos: pos, dist: dist, degree: deg}\n    }\n\n    let updateDataPoint = () => {\n        console.log('updateDataPoint');\n        let num = p.int(p.frameCount / 4);\n        dataPoint = allDataPoint.map(dataPointMap).slice(-num);\n        enableUpdate = num > allDataPoint.length ? false : true;\n    }\n\n\n    p.draw = function () {\n        if (p.frameCount % 25 === 0 && enableUpdate){\n            updateDataPoint();\n        }\n        lastRadioDeg = radioDeg;\n        radioDeg = calcDeg(configData.radioSpeed, p.frameCount);\n\n        //emit radio\n        if (p.frameCount % 30 === 0)\n            emitOSC('/gps/radio', (radioDeg/Math.PI*180).toFixed(5)*1.0)\n\n        p.background(0, 100);\n        p.textSize(12)\n        p.fill(255)\n        p.stroke(255,10)\n        p.strokeWeight(1)\n\n        let text = `Total Nodes: ${calcPerson(dataPoint)}\\nActive: ${calcActive(dataPoint)}\\nExecute Time: ${p.frameCount}\\nScanning: ${(radioDeg/Math.PI*180).toFixed(2)}°`\n        drawText(p, text);\n        //將繪製點移動到畫布中央\n        p.translate(p.width/2, p.height/2);\n\n        drawCircle(p, 250000, 0.58);\n        drawDataPoint(p, dataPoint, radioDeg, lastRadioDeg);\n        \n        p.noFill()\n        drawSwipeLine(p, radioDeg);\n        drawCenter(p, configData.centerName);\n        drawMapFrame(p);\n        drawSecRect(p);\n    };\n};\n\nfunction drawSecRect(p) {\n    let sec = new Date().getSeconds();\n    p.fill(255);\n    p.rect(-p.width/2+(sec % 5)*30+20,p.height/2-75,25,6);\n    p.stroke(255);\n    p.noFill();\n    p.rect(-p.width/2+( (sec+1) % 5)*30+20,p.height/2-75,25,6);\n}\n\nfunction drawMapFrame(p) {\n    p.push();\n        p.stroke(255,255);\n        p.strokeWeight(10);\n        p.rect(-p.width/2,-p.height/2, p.width, p.height);\n        p.strokeWeight(1);\n        p.stroke(255,30);\n        \n        p.rect(-p.width/2+10,-p.height/2+10, p.width-20, p.height-20);\n    \n        p.stroke(255,255);\n        p.strokeWeight(2);\n        p.line(-p.width/2,0,-p.width/2+20,0);\n        p.line(p.width/2,0,p.width/2-20,0);\n    \n        p.line(0,-p.height/2,0,-p.height/2+20);\n        p.line(0,p.height/2,0,p.height/2-20);\n    \n        p.noStroke();\n        p.fill(255,200);\n        p.textAlign(p.CENTER);\n        p.text('W',-p.width/2+20+15,5);\n        p.text('E',p.width/2-20-15,5);\n        p.text('N',0,-p.height/2+20+20);\n        p.text('S',0,p.height/2-20-10);\n    p.pop();\n}\n\nfunction drawCenter(p, centerName) {\n    p.push();\n        p.fill(\"#f24\");\n        p.noStroke();\n        p.ellipse(0,0,8,8);\n        p.rectMode(p.CENTER);\n        p.stroke(255);\n        p.noFill();\n        p.strokeWeight(2);\n        p.rect(0,0,20,20);\n    \n    \n        p.rotate(p.frameCount/100);\n        p.stroke(255,20);\n        p.rect(0,0,20,20);\n    p.pop();\n\n    p.push();\n        p.fill(255,200);\n        p.text(centerName, 20, 12);\n    p.pop();\n}\n\nfunction drawSwipeLine(p, radioDeg) {\n    p.push()\n        p.stroke(255,200)\n        p.strokeWeight(2)\n        p.line(0,0,Math.cos(radioDeg)*1000, Math.sin(radioDeg)*1000)\n        p.noStroke()\n        let degSpan = 20\n        for(var i=0;i < degSpan;i++){\n            p.fill(255,50/ degSpan*(degSpan-i) )\n            p.beginShape()\n            p.vertex(0,0)\n            p.vertex(Math.cos(radioDeg-0.02*(i-1))*1000,Math.sin(radioDeg-0.02*(i-1))*1000)\n            p.vertex(Math.cos(radioDeg-0.02*i)*1000,Math.sin(radioDeg-0.02*i)*1000)\n            p.endShape(p.CLOSE)\n        }\n    p.pop()\n}\n\nfunction drawDataPoint(p, dataPoint, radioDeg, lastRadioDeg) {\n    p.textSize(12)\n    p.fill(255)\n    p.stroke(255,10)\n    p.strokeWeight(1)\n    let lastTrigger;\n    dataPoint.forEach(( e, eid)=>{\n        let timeDelta = Date.now()- e.timeStamp;\n        let dataDegree = e.pos.heading();\n        let angleDelta = -1000\n        let nowId = e.showId;\n        if (!e.pos) {\n            console.log('no position?');\n            return;\n        }\n        angleDelta = dataDegree - radioDeg;\n        let scanned = ((lastRadioDeg - dataDegree) * (radioDeg - dataDegree) <= 0)\n                        && Math.abs(lastRadioDeg - radioDeg) < 1;\n        \n        if (scanned){\n            if (lastTrigger !== e){\n                //console.log(e);\n                let d = JSON.stringify({\n                    degree: e.degree,\n                    dist: e.dist,\n                    id: e.key,\n                    data: e.data,\n                    leave: e.leave,\n                    timeStamp: e.timeStamp,\n                    time_to_now_second: timeDelta,\n                })\n                \n                emitOSC('/gps/trigger', d);\n            }\n            lastTrigger = e;\n        }\n\n        p.push()\n        let dist = e.pos.mag()\n\n        //draw line\n        if (dist < p.width * 2){\n            p.noFill()\n            p.beginShape()\n            for(var o=0; o < dist-10; o+=2){\n                let useAngle = dataDegree + p.noise(p.frameCount/10+ o/10)/60\n                p.vertex(Math.cos(useAngle)*o, Math.sin(useAngle)*o)\n                // line(o,o,a.pos.x*0.95,a.pos.y*0.95)\n            }\n            p.endShape()\n        }\n        p.pop()\n                \n        let scanAfter = Math.abs(angleDelta % (Math.PI*2) ) < 0.08 && angleDelta < 0\n        if (scanAfter){\n            \n            p.push()\n                p.fill(0,0,0,70)\n                p.noStroke()\n                p.rect(e.pos.x+6,e.pos.y-5, p.textWidth(nowId)+8,12)\n                p.fill(255)\n                p.text(nowId, e.pos.x+10, e.pos.y+5)\n            p.pop()\n        }\n           \n        if (!scanned){\n            p.fill(255, 5+150/Math.log(timeDelta) + (scanAfter ? 50 : 0))  \n        } else{\n            p.fill(255)\n        }\n        \n        //繪製正在線上的點\n        let useR = 5 + (angleDelta<0?Math.max(Math.min(-1/(angleDelta),6),0):0) + p.noise(eid, p.frameCount, e.lon)*2\n\n        if (!e.leave){\n            p.fill(255,0,0)\n            p.text(this.uid, 0, 30)\n            useR= 5+ Math.sin(p.frameCount/10)*2\n            p.push()\n                p.stroke(255,200)\n                p.rectMode(p.CENTER)\n                p.translate(e.pos.x,e.pos.y)\n                p.rotate(p.frameCount/(10+ e.lon/100))\n                p.noFill()\n                p.rect(0,0,12,12)\n            p.pop()\n            p.text(`//ACTIVE ${(p.frameCount % 10 <5?\".\":\"\")}\\nID: ${nowId}`, \n                e.pos.x+10, e.pos.y+20)\n        }\n        p.ellipse(e.pos.x, e.pos.y, useR, useR)\n      })\n}\n\n\nfunction drawCircle(p, globalScale, globalPow) {\n    let frameCount = p.frameCount;\n    p.noFill();\n    for(let i=0;i<50;i++){\n        let r = Math.pow(Math.abs(i * globalScale / 10), globalPow) * 0.5\n        p.stroke(255, Math.max(60-i/10*60,4) + Math.sin(-frameCount/10+i)*4)\n        if (i<9){\n            p.fill(255,255,255,1 + p.noise(frameCount/10,i)*1)\n            p.stroke(255,20)\n            p.beginShape(p.LINES)\n    \n            for(let o=0; o<360; o++){\n                let useR = calcWaveR(r, frameCount, i, o, 50/(10-i));\n                p.vertex(useR*Math.cos(p.radians(o+frameCount/40)),useR*Math.sin(p.radians(o+frameCount/40)) )\n            }\n            p.endShape()\n          \n            p.noStroke()\n            //用 close 填內容色\n            p.beginShape()\n            for(let o=0;o<360;o++){\n                let useR = calcWaveR(r, frameCount, i, o, 30/(8-i));\n                p.vertex(useR*Math.cos(p.radians(o+frameCount/40)),useR*Math.sin(p.radians(o+frameCount/40)) )\n            }\n            p.endShape(p.CLOSE)\n\n        } else{\n            p.noFill()\n            p.ellipse(0,0,r,r)\n\n        }\n    }  \n}\n\nfunction drawText(p, text) {\n    //Draw Date Text \n    p.push();\n    p.fill(255);\n    p.textSize(14);\n    p.textLeading(24);\n    p.text(new Date(), 20, p.height-35);\n    p.pop();\n\n    //Show Number of Person\n    //TODO: Calculate Person\n    p.push();\n        p.fill(255,130);\n        p.text(text, 20, 35);\n        //p.text(\"Total Nodes: \"+calcPerson() + \"\\nActive: \" + allActiveCount + \"\\nExecute Time: \" + frameCount+\"\\nScanning: \"+parseFloat( radioDeg/PI*180).toFixed(2)+\"°\", 20, 35)\n    p.pop();\n}\n\nfunction calcWaveR(r, frameCount, i, o, mult) {\n    return r/2 + Math.sin(frameCount/(10+i*10)+o/360*2*Math.PI*10)*mult;\n}\n\nfunction calcDeg(radioSpeed, frameCount) {\n    return (radioSpeed * frameCount / 60) % (2*Math.PI) - Math.PI;\n}\n\nfunction getPos(p, configData, obj){\n    if (obj.lon && obj.lat){\n      let lon = (obj.lon-configData.lon)*configData.globalScale\n      let lat = (obj.lat-configData.lat)*configData.globalScale\n      let result= p.createVector(lon,lat)\n      result.x = (result.x>0?1:-1)* Math.pow(Math.abs(result.x),configData.globalPow)\n      result.y =  (result.y>0?1:-1)* Math.pow(Math.abs(result.y),configData.globalPow)\n      result.y*=-1\n      return result\n    } \n    return null\n}\n\nfunction calcPerson(dataPoint) {\n    return dataPoint.length;\n}\n\nfunction calcActive(dataPoint) {\n    return dataPoint.filter(e => !e.leave).length;\n}","import * as firebase from 'firebase';\nimport {firebaseConfig} from './firebaseConfig';\n//copy firebaseConfig from firebase website\n\n// Initialize Firebase\nfirebase.initializeApp(firebaseConfig);\nconst databaseRef = firebase.database().ref();\nexport const earthLocRef = databaseRef.child('earthlocations');","// var firebaseConfig = {\n//     apiKey: \"AIzaSyAldF3HRwUKCpzSid5MFtEEakwNYg12M6I\",\n//     authDomain: \"song-of-distance-47ab8.firebaseapp.com\",\n//     databaseURL: \"https://song-of-distance-47ab8.firebaseio.com\",\n//     projectId: \"song-of-distance-47ab8\",\n//     storageBucket: \"song-of-distance-47ab8.appspot.com\",\n//     messagingSenderId: \"807349511024\",\n//     appId: \"1:807349511024:web:bfabe2b53857e837d665b5\",\n//     measurementId: \"G-6D96Y0D4KW\"\n//   };\nexport var firebaseConfig = {\n    apiKey: \"AIzaSyBlfFaGBx7B_nBnlR29yhJAr6kPjqAdLfo\",\n    authDomain: \"test-84ae7.firebaseapp.com\",\n    databaseURL: \"https://test-84ae7.firebaseio.com\",\n    projectId: \"test-84ae7\",\n    storageBucket: \"test-84ae7.appspot.com\",\n    messagingSenderId: \"762464277938\"\n  };","import React, {Component} from 'react';\nimport P5Wrapper from 'react-p5-wrapper';\nimport sketch from './sketch';\nimport {earthLocRef} from './firebase';\nimport * as dat from 'dat.gui';\n\n\nclass LocData extends Component {\n    state = {\n        allLocations: [],\n        dataPoint: []\n    }\n\n    componentDidMount() {\n        earthLocRef.on('value', (snapshot) => {\n            //console.log(snapshot.val());\n            this.setState({\n                allLocations: snapshot.val()\n            });\n            //getAll();\n            this.updateDataSet();\n        });\n    }\n\n    updateDataSet = () => {\n        console.log('updateDataset');\n        \n        this.checkData();\n        this.setState({\n            dataPoint: Object.entries(this.state.allLocations).map(d => \n                ({...d[1], key: d[0]}))\n        })\n        \n    }\n\n    checkData = () => {\n        //should be removed....\n        Object.entries(this.state.allLocations).forEach((e)=>{\n            //如果沒有 key 補上\n            if (!('key' in e[1])) {\n                earthLocRef.child(e[0]).child('key').set(e[0]);\n            }\n            //如果沒有 showId 補上\n            if (!('showId' in e[1]) && e[0] ){\n                earthLocRef.child(e[0]).child(\"showId\").set(getShowId(e[0]))\n            }\n            //如果沒有時間戳或位置資料，移除該資料\n            if (!e[1].timeStamp || !e[1].lat || !e[1].lon){\n                earthLocRef.child(e[0]).remove()\n            } else { //check offline\n                let timeDelta = Date.now()-e[1].timeStamp\n                //如果已離線>6秒，設定為離線\n                if (timeDelta > 6000){\n                    if (!e[1].leave){\n                        earthLocRef.child(e[0]).child('leave').set(true)\n                    }\n                } else{\n                    //如果沒有，設定為活躍\n                    if (e[1].leave){\n                        earthLocRef.child(e[0]).child('leave').set(false)    \n                    }\n                }\n            }\n        })\n    }\n\n    render() {\n        return (\n        <ControlPanel dataPoint={this.state.dataPoint}/>\n        );\n    }\n}\n\nclass ControlPanel extends Component {\n    state = {\n        data: {\n            globalScale: 250000,\n            globalPow: 0.58,\n            maxLineLength: 100,\n            radioSpeed: 0.8,\n            lat: 42.35,\n            lon: -71.05,\n            centerName: 'center'\n        }, \n        GUI: new dat.GUI()\n    }\n\n    componentDidMount() {\n        let dataStore = sessionStorage.getItem('controlData');\n        console.log(dataStore);\n        let {data, GUI} = this.state;\n        if (dataStore) {\n            data = JSON.parse(dataStore);\n            this.setState({\n                data: data\n            })\n        } \n        const btn = {'add config': this.saveControlData};\n        GUI.add(data,\"globalScale\",1000,800000)\n        GUI.add(data,\"globalPow\",0,0.99)\n        GUI.add(data,\"maxLineLength\")\n        GUI.add(data,'radioSpeed',0,3,0.01)\n        GUI.add(data,'centerName')\n        GUI.add(data,'lat',-90,90,0.01)\n        GUI.add(data,'lon',-180,180,0.01)\n        GUI.add(btn, 'add config');\n\n        GUI.close()\n    }\n    \n    saveControlData = () => {\n        let {data} = this.state;\n        sessionStorage.setItem('controlData', JSON.stringify({...data}));\n    }\n\n    render() {\n        const {data} = this.state;\n        let {dataPoint} = this.props;\n\n        return (\n            <P5Wrapper sketch={sketch} dataPoint={dataPoint} configData={data}/>\n        )\n\n\n    }\n\n}\n\nconst getShowId = (id) => {\n    return \"A\" + (id.split(\"\").map(ch=>ch.charCodeAt(0)).reduce((a,b)=>(a*b),1) % 1000)\n  }\n\nexport default LocData;","import React from 'react';\nimport LocData from './ControlPanel';\nimport './App.css';\n\nclass App extends React.Component {\n  \n  render() {\n\n    return (\n      <LocData/>\n    )\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}