{"version":3,"sources":["socketUsage.js","config.js","sketch.js","firebase.js","ControlPanel.js","App.js","index.js"],"names":["socket","io","isSocketConnect","on","console","log","emitOSC","address","value","emit","args","sketch","p","cnv","radioDeg","lastRadioDeg","allDataPoint","dataPoint","configData","enableUpdate","setup","createCanvas","canvasWidth","windowHeight","windowWidth","position","canvasOffset","frameRate","windowResized","resizeCanvas","myCustomRedrawAccordingToNewPropsHandler","props","Object","keys","length","updateDataPoint","dataPointMap","e","pos","obj","lon","lat","globalScale","result","createVector","x","Math","pow","abs","globalPow","y","getPos","dist","mag","toFixed","deg","heading","PI","degree","num","int","frameCount","map","slice","draw","radioSpeed","background","textSize","fill","stroke","strokeWeight","text","calcPerson","filter","leave","calcActive","push","textLeading","Date","height","pop","drawText","translate","width","noFill","i","r","max","sin","noise","beginShape","LINES","o","useR","calcWaveR","vertex","cos","radians","endShape","noStroke","CLOSE","ellipse","drawCircle","lastTrigger","forEach","eid","angleDelta","timeDelta","now","timeStamp","dataDegree","nowId","showId","scanned","d","JSON","stringify","id","key","data","time_to_now_second","useAngle","scanAfter","rect","textWidth","min","rectMode","CENTER","rotate","drawDataPoint","line","drawSwipeLine","centerName","drawCenter","textAlign","drawMapFrame","sec","getSeconds","drawSecRect","mult","firebase","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","earthLocRef","ref","child","LocData","state","allLocations","updateDataSet","checkData","setState","entries","set","getShowId","remove","snapshot","val","this","Component","ControlPanel","maxLineLength","window","screen","GUI","dat","saveControlData","localStorage","setItem","dataStore","getItem","parse","btn","add","close","style","left","split","ch","charCodeAt","reduce","a","b","App","React","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.59ac9eea.chunk.js","sourcesContent":["import io from 'socket.io-client';\nimport {serverIP} from './config';\n\nconst socket = io(serverIP);\nlet isSocketConnect = false;\nsocket.on('connect', () => {\n    isSocketConnect = true;\n    console.log('socket connect to server');\n})\n\nexport let emitOSC = (address, value)=> {\n    socket.emit('osc', {\n        address: address,\n        args: [{\n            value: value\n        }]\n    });\n}\n\nexport {isSocketConnect};","// var firebaseConfig = {\n//     apiKey: \"AIzaSyAldF3HRwUKCpzSid5MFtEEakwNYg12M6I\",\n//     authDomain: \"song-of-distance-47ab8.firebaseapp.com\",\n//     databaseURL: \"https://song-of-distance-47ab8.firebaseio.com\",\n//     projectId: \"song-of-distance-47ab8\",\n//     storageBucket: \"song-of-distance-47ab8.appspot.com\",\n//     messagingSenderId: \"807349511024\",\n//     appId: \"1:807349511024:web:bfabe2b53857e837d665b5\",\n//     measurementId: \"G-6D96Y0D4KW\"\n//   };\nexport const firebaseConfig = {\n    apiKey: \"AIzaSyBlfFaGBx7B_nBnlR29yhJAr6kPjqAdLfo\",\n    authDomain: \"test-84ae7.firebaseapp.com\",\n    databaseURL: \"https://test-84ae7.firebaseio.com\",\n    projectId: \"test-84ae7\",\n    storageBucket: \"test-84ae7.appspot.com\",\n    messagingSenderId: \"762464277938\"\n};\n\nexport const serverIP = 'https://gps-250305.appspot.com/';","import {emitOSC, isSocketConnect} from './socketUsage';\n//import {earthLocRef} from './firebase';\n\nexport default function sketch (p) {\n    let radioDeg = 0;\n    let lastRadioDeg = 0;\n    let allDataPoint = [];\n    let dataPoint = [];\n    let configData = {};\n    let enableUpdate = true;\n    let cnv;\n\n    p.setup = () => {\n        if ('canvasWidth' in configData)\n            cnv = p.createCanvas(configData.canvasWidth, p.windowHeight);\n        else \n            cnv = p.createCanvas(p.windowWidth, p.windowHeight);\n\n        if ('canvasOffset' in configData)\n            cnv.position(configData.canvasOffset, 0);\n        p.frameRate(30);\n        console.log('issocketConnect:' + isSocketConnect);\n        \n    };\n\n    p.windowResized = () =>  {\n        if ('canvasWidth' in configData) {\n            p.resizeCanvas(configData.canvasWidth, p.windowHeight);\n        } else \n            p.resizeCanvas(p.windowWidth, p.windowHeight);\n    }\n\n    \n    p.myCustomRedrawAccordingToNewPropsHandler = (props) => {\n        if (props.configData) {\n            configData = props.configData;\n            p.windowResized();\n        }\n        if (props.dataPoint && Object.keys(configData).length !== 0){\n            allDataPoint = props.dataPoint;\n            updateDataPoint();\n        }\n    };\n\n\n    let dataPointMap = (e) => {\n        let pos = getPos(p, configData, e);\n        let dist = pos.mag().toFixed(5)*1.0;\n        let deg = (pos.heading()/Math.PI*180).toFixed(5)*1.0;\n        return {...e, pos: pos, dist: dist, degree: deg}\n    }\n\n    let updateDataPoint = () => {\n        //console.log('updateDataPoint');\n        let num = p.int(p.frameCount / 4);\n        dataPoint = allDataPoint.map(dataPointMap).slice(-num);\n        //console.log(allDataPoint.length);\n        enableUpdate = num > allDataPoint.length ? false : true;\n    }\n\n\n    p.draw = function () {\n        if (p.frameCount % 25 === 0 && enableUpdate){\n            updateDataPoint();\n        }\n        lastRadioDeg = radioDeg;\n        radioDeg = calcDeg(configData.radioSpeed, p.frameCount);\n\n        //emit radio\n        //if (p.frameCount % 30 === 0)\n        emitOSC('/gps/radio', (radioDeg/Math.PI*180).toFixed(5)*1.0);\n\n        p.background(0, 100);\n        p.textSize(12);\n        p.fill(255);\n        p.stroke(255,10);\n        p.strokeWeight(1);\n\n        let text = `Total Nodes: ${calcPerson(dataPoint)}\\nActive: ${calcActive(dataPoint)}\\nExecute Time: ${p.frameCount}\\nScanning: ${(radioDeg/Math.PI*180).toFixed(2)}°`\n        drawText(p, text);\n        //將繪製點移動到畫布中央\n        p.translate(p.width/2, p.height/2);\n\n        drawCircle(p, 250000, 0.58);\n        drawDataPoint(p, dataPoint, radioDeg, lastRadioDeg);\n        \n        p.noFill()\n        drawSwipeLine(p, radioDeg);\n        drawCenter(p, configData.centerName);\n        drawMapFrame(p);\n        drawSecRect(p);\n        //drawOffRect(p, configData);\n    };\n};\n\nfunction drawOffRect(p, configData) {\n    p.push();\n        p.fill(0);\n        p.noStroke();\n        p.rect(-p.width/2, -p.height/2, configData.leftCut, p.height);\n        p.rect(p.width/2-configData.rightCut, -p.height/2, configData.rightCut, p.height);\n    p.pop();\n}\n\nfunction drawSecRect(p) {\n    let sec = new Date().getSeconds();\n    p.fill(255);\n    p.rect(-p.width/2+(sec % 5)*30+20,p.height/2-75,25,6);\n    p.stroke(255);\n    p.noFill();\n    p.rect(-p.width/2+( (sec+1) % 5)*30+20,p.height/2-75,25,6);\n}\n\nfunction drawMapFrame(p) {\n    p.push();\n        p.stroke(255,255);\n        p.strokeWeight(10);\n        p.rect(-p.width/2,-p.height/2, p.width, p.height);\n        p.strokeWeight(1);\n        p.stroke(255,30);\n        \n        p.rect(-p.width/2+10,-p.height/2+10, p.width-20, p.height-20);\n    \n        p.stroke(255,255);\n        p.strokeWeight(2);\n        p.line(-p.width/2,0,-p.width/2+20,0);\n        p.line(p.width/2,0,p.width/2-20,0);\n    \n        p.line(0,-p.height/2,0,-p.height/2+20);\n        p.line(0,p.height/2,0,p.height/2-20);\n    \n        p.noStroke();\n        p.fill(255,200);\n        p.textAlign(p.CENTER);\n        p.text('W',-p.width/2+20+15,5);\n        p.text('E',p.width/2-20-15,5);\n        p.text('N',0,-p.height/2+20+20);\n        p.text('S',0,p.height/2-20-10);\n    p.pop();\n}\n\nfunction drawCenter(p, centerName) {\n    p.push();\n        p.fill(\"#f24\");\n        p.noStroke();\n        p.ellipse(0,0,8,8);\n        p.rectMode(p.CENTER);\n        p.stroke(255);\n        p.noFill();\n        p.strokeWeight(2);\n        p.rect(0,0,20,20);\n    \n    \n        p.rotate(p.frameCount/100);\n        p.stroke(255,20);\n        p.rect(0,0,20,20);\n    p.pop();\n\n    p.push();\n        p.fill(255,200);\n        p.text(centerName, 20, 12);\n    p.pop();\n}\n\nfunction drawSwipeLine(p, radioDeg) {\n    p.push()\n        p.stroke(255,200)\n        p.strokeWeight(2)\n        p.line(0,0,Math.cos(radioDeg)*1000, Math.sin(radioDeg)*1000)\n        p.noStroke()\n        let degSpan = 20\n        for(var i=0;i < degSpan;i++){\n            p.fill(255,50/ degSpan*(degSpan-i) )\n            p.beginShape()\n            p.vertex(0,0)\n            p.vertex(Math.cos(radioDeg-0.02*(i-1))*1000,Math.sin(radioDeg-0.02*(i-1))*1000)\n            p.vertex(Math.cos(radioDeg-0.02*i)*1000,Math.sin(radioDeg-0.02*i)*1000)\n            p.endShape(p.CLOSE)\n        }\n    p.pop()\n}\n\nfunction drawDataPoint(p, dataPoint, radioDeg, lastRadioDeg) {\n    p.textSize(12)\n    p.fill(255)\n    p.stroke(255,10)\n    p.strokeWeight(1)\n    let lastTrigger;\n    dataPoint.forEach(( e, eid)=>{\n        let timeDelta = Date.now()- e.timeStamp;\n        let dataDegree = e.pos.heading();\n        let angleDelta = -1000\n        let nowId = e.showId;\n        if (!e.pos) {\n            console.log('no position?');\n            return;\n        }\n        angleDelta = dataDegree - radioDeg;\n        let scanned = ((lastRadioDeg - dataDegree) * (radioDeg - dataDegree) <= 0)\n                        && Math.abs(lastRadioDeg - radioDeg) < 1;\n        \n        if (scanned){\n            if (lastTrigger !== e){\n                //console.log(e);\n                let d = JSON.stringify({\n                    degree: e.degree,\n                    dist: e.dist,\n                    id: e.key,\n                    data: e.data,\n                    leave: e.leave,\n                    timeStamp: e.timeStamp,\n                    time_to_now_second: timeDelta,\n                })\n                \n                emitOSC('/gps/trigger', d);\n            }\n            lastTrigger = e;\n        }\n\n        p.push()\n        let dist = e.pos.mag()\n\n        //draw line\n        if (dist < p.width * 2){\n            p.noFill()\n            p.beginShape()\n            for(var o=0; o < dist-10; o+=2){\n                let useAngle = dataDegree + p.noise(p.frameCount/10+ o/10)/60\n                p.vertex(Math.cos(useAngle)*o, Math.sin(useAngle)*o)\n                // line(o,o,a.pos.x*0.95,a.pos.y*0.95)\n            }\n            p.endShape()\n        }\n        p.pop()\n                \n        let scanAfter = Math.abs(angleDelta % (Math.PI*2) ) < 0.08 && angleDelta < 0\n        if (scanAfter){\n            \n            p.push()\n                p.fill(0,0,0,70)\n                p.noStroke()\n                p.rect(e.pos.x+6,e.pos.y-5, p.textWidth(nowId)+8,12)\n                p.fill(255)\n                p.text(nowId, e.pos.x+10, e.pos.y+5)\n            p.pop()\n        }\n           \n        if (!scanned){\n            p.fill(255, 5+150/Math.log(timeDelta) + (scanAfter ? 50 : 0))  \n        } else{\n            p.fill(255)\n        }\n        \n        //繪製正在線上的點\n        let useR = 5 + (angleDelta<0?Math.max(Math.min(-1/(angleDelta),6),0):0) + p.noise(eid, p.frameCount, e.lon)*2\n\n        if (!e.leave){\n            p.fill(255,0,0)\n            //p.text(nowId, 0, 30)\n            useR= 5+ Math.sin(p.frameCount/10)*2\n            p.push()\n                p.stroke(255,200)\n                p.rectMode(p.CENTER)\n                p.translate(e.pos.x,e.pos.y)\n                p.rotate(p.frameCount/(10+ e.lon/100))\n                p.noFill()\n                p.rect(0,0,12,12)\n            p.pop()\n            p.text(`//ACTIVE ${(p.frameCount % 10 <5?\".\":\"\")}\\nID: ${nowId}`, \n                e.pos.x+10, e.pos.y+20)\n        }\n        p.ellipse(e.pos.x, e.pos.y, useR, useR)\n      })\n}\n\n\nfunction drawCircle(p, globalScale, globalPow) {\n    let frameCount = p.frameCount;\n    p.noFill();\n    for(let i=0;i<50;i++){\n        let r = Math.pow(Math.abs(i * globalScale / 10), globalPow) * 0.5\n        p.stroke(255, Math.max(60-i/10*60,4) + Math.sin(-frameCount/10+i)*4)\n        if (i<9){\n            p.fill(255,255,255,1 + p.noise(frameCount/10,i)*1)\n            p.stroke(255,20)\n            p.beginShape(p.LINES)\n    \n            for(let o=0; o<360; o++){\n                let useR = calcWaveR(r, frameCount, i, o, 50/(10-i));\n                p.vertex(useR*Math.cos(p.radians(o+frameCount/40)),useR*Math.sin(p.radians(o+frameCount/40)) )\n            }\n            p.endShape()\n          \n            p.noStroke()\n            //用 close 填內容色\n            p.beginShape()\n            for(let o=0;o<360;o++){\n                let useR = calcWaveR(r, frameCount, i, o, 30/(8-i));\n                p.vertex(useR*Math.cos(p.radians(o+frameCount/40)),useR*Math.sin(p.radians(o+frameCount/40)) )\n            }\n            p.endShape(p.CLOSE)\n\n        } else{\n            p.noFill()\n            p.ellipse(0,0,r,r)\n\n        }\n    }  \n}\n\nfunction drawText(p, text) {\n    //Draw Date Text \n    p.push();\n    p.fill(255);\n    p.textSize(14);\n    p.textLeading(24);\n    p.text(new Date(), 20, p.height-35);\n    p.pop();\n\n    //Show Number of Person\n    //TODO: Calculate Person\n    p.push();\n        p.fill(255,130);\n        p.text(text, 20, 35);\n        //p.text(\"Total Nodes: \"+calcPerson() + \"\\nActive: \" + allActiveCount + \"\\nExecute Time: \" + frameCount+\"\\nScanning: \"+parseFloat( radioDeg/PI*180).toFixed(2)+\"°\", 20, 35)\n    p.pop();\n}\n\nfunction calcWaveR(r, frameCount, i, o, mult) {\n    return r/2 + Math.sin(frameCount/(10+i*10)+o/360*2*Math.PI*10)*mult;\n}\n\nfunction calcDeg(radioSpeed, frameCount) {\n    return (radioSpeed * frameCount / 60) % (2*Math.PI) - Math.PI;\n}\n\nfunction getPos(p, configData, obj){\n    if (obj.lon && obj.lat){\n      let lon = (obj.lon-configData.lon)*configData.globalScale\n      let lat = (obj.lat-configData.lat)*configData.globalScale\n      let result= p.createVector(lon,lat)\n      result.x = (result.x>0?1:-1)* Math.pow(Math.abs(result.x),configData.globalPow)\n      result.y =  (result.y>0?1:-1)* Math.pow(Math.abs(result.y),configData.globalPow)\n      result.y*=-1\n      return result\n    } \n    return null\n}\n\nfunction calcPerson(dataPoint) {\n    return dataPoint.length;\n}\n\nfunction calcActive(dataPoint) {\n    return dataPoint.filter(e => !e.leave).length;\n}","import * as firebase from 'firebase';\nimport {firebaseConfig} from './config';\n//copy firebaseConfig from firebase website\n\n// Initialize Firebase\nfirebase.initializeApp(firebaseConfig);\nconst databaseRef = firebase.database().ref();\nexport const earthLocRef = databaseRef.child('earthlocations');\n","import React, {Component} from 'react';\nimport P5Wrapper from 'react-p5-wrapper';\nimport sketch from './sketch';\nimport {earthLocRef} from './firebase';\nimport * as dat from 'dat.gui';\n\n\nclass LocData extends Component {\n    state = {\n        allLocations: [],\n        dataPoint: []\n    }\n\n    componentDidMount() {\n        earthLocRef.on('value', (snapshot) => {\n            this.setState({\n                allLocations: snapshot.val()\n            });\n            //getAll();\n            this.updateDataSet();\n        });\n    }\n\n    updateDataSet = () => {\n        //console.log('updateDataset');\n        this.checkData();\n        this.setState({\n            dataPoint: Object.entries(this.state.allLocations).map(d => \n                ({...d[1], key: d[0]}))\n        })\n        \n    }\n\n    checkData = () => {\n        //should be removed....\n        Object.entries(this.state.allLocations).forEach((e)=>{\n            //如果沒有 key 補上\n            if (!('key' in e[1])) {\n                earthLocRef.child(e[0]).child('key').set(e[0]);\n            }\n            //如果沒有 showId 補上\n            if (!('showId' in e[1]) && e[0] ){\n                earthLocRef.child(e[0]).child(\"showId\").set(getShowId(e[0]))\n            }\n            //如果沒有時間戳或位置資料，移除該資料\n            if (!e[1].timeStamp || !e[1].lat || !e[1].lon){\n                earthLocRef.child(e[0]).remove()\n            } else { //check offline\n                let timeDelta = Date.now()-e[1].timeStamp\n                //如果已離線>6秒，設定為離線\n                if (timeDelta > 6000){\n                    if (!e[1].leave){\n                        earthLocRef.child(e[0]).child('leave').set(true)\n                    }\n                } else{\n                    //如果沒有，設定為活躍\n                    if (e[1].leave){\n                        earthLocRef.child(e[0]).child('leave').set(false)    \n                    }\n                }\n            }\n        })\n    }\n\n    render() {\n        return (\n        <ControlPanel dataPoint={this.state.dataPoint}/>\n        );\n    }\n}\n\nclass ControlPanel extends Component {\n    state = {\n        data: {\n            globalScale: 250000,\n            globalPow: 0.58,\n            maxLineLength: 100,\n            radioSpeed: 0.8,\n            lat: 24.9339405,\n            lon: 121.2215022,\n            centerName: '馬祖新村',\n            canvasWidth: window.screen.width,\n            canvasOffset: 0,\n        }, \n        GUI: new dat.GUI()\n    }\n\n    componentDidMount() {\n        let dataStore = localStorage.getItem('controlData');\n        let {data, GUI} = this.state;\n        if (dataStore) {\n            data = JSON.parse(dataStore);\n            this.setState({\n                data: data\n            })\n        } \n        const btn = {'add config': this.saveControlData};\n        GUI.add(data,\"globalScale\",1000,800000)\n        GUI.add(data,\"globalPow\",0,0.99)\n        GUI.add(data,\"maxLineLength\")\n        GUI.add(data,'radioSpeed',0,3,0.01)\n        GUI.add(data,'centerName')\n        GUI.add(data,'lat',-90,90,0.01)\n        GUI.add(data,'lon',-180,180,0.01)\n        GUI.add(data,'canvasWidth')\n        GUI.add(data,'canvasOffset')\n        GUI.add(btn, 'add config');\n\n        GUI.close()\n    }\n    \n    saveControlData = () => {\n        console.log('save!');\n        let {data} = this.state;\n        localStorage.setItem('controlData', JSON.stringify({...data}));\n    }\n\n    render() {\n        const {data} = this.state;\n        let {dataPoint} = this.props;\n\n        return (\n            <P5Wrapper style={{left: 100}} sketch={sketch} dataPoint={dataPoint} configData={data}/>\n        )\n\n\n    }\n\n}\n\nconst getShowId = (id) => {\n    return \"A\" + (id.split(\"\").map(ch=>ch.charCodeAt(0)).reduce((a,b)=>(a*b),1) % 1000)\n  }\n\nexport default LocData;","import React from 'react';\nimport LocData from './ControlPanel';\nimport './App.css';\n\nclass App extends React.Component {\n  \n  render() {\n\n    return (\n      <LocData/>\n    )\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}